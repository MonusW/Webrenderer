"use strict";var Camera=function(){function Camera(fov,aspect,near,far){this.fov=fov;this.aspect=aspect;this.near=near;this.far=far;this.projectionMatrix=Matrix4.createPerspective(fov,aspect,near,far);this.position=new Vec3;this.worldUp=new Vec3(0,1,0);this.dir=new Vec3(0,0,-1);this.viewMatrix=Matrix4.createLookAt(this.position,this.dir,this.worldUp)}Camera.prototype.lookAt=function(pos,target,upVec){this.position=pos;this.worldUp=upVec.normalize();this.dir=target.substract(pos).normalize();this.viewMatrix=Matrix4.createLookAt(pos,target,upVec)};return Camera}();"use strict";var Color=function(){function Color(r,g,b){this.r=0;this.g=0;this.b=0;if(g===undefined&&b===undefined){this.set(r)}else{this.setRGB(r,g,b)}}Color.prototype.setRGB=function(r,g,b){this.r=r;this.g=g;this.b=b};Color.prototype.set=function(value){if(typeof value==="number"){this.setHex(value)}};Color.prototype.setHex=function(hex){hex=Math.floor(hex);this.r=hex>>16&255;this.g=hex>>8&255;this.b=hex&255};Color.prototype.interp=function(c,t){var iR=Math.round(_Math.interp(this.r,c.r,t));var iG=Math.round(_Math.interp(this.g,c.g,t));var iB=Math.round(_Math.interp(this.b,c.b,t));return new Color(iR,iG,iB)};Color.prototype.clone=function(){return new Color(this.r,this.g,this.b)};Color.prototype.swap=function(c){var tmp=c.clone();c.r=this.r;c.g=this.g;c.b=this.b;this.r=tmp.r;this.g=tmp.g;this.b=tmp.b};return Color}();"use strict";var Object3D=function(){function Object3D(_type){if(_type===void 0){_type="Object3D"}this.type=_type;this.wireframe=false;this.uuid=_Math.generateUUID();this.modelMatrix=Matrix4.createUnitMat4()}return Object3D}();"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var Box=function(_super){__extends(Box,_super);function Box(width,height,depth){var _this=_super.call(this,"Box")||this;_this.vertices=[];_this.width=width;_this.height=height;_this.depth=depth;_this.position=new Vec3(0,0,0);_this.rotation=new Vec3;_this.generateVertices();return _this}Box.prototype.generateVertices=function(){var x=this.width/2;var y=this.height/2;var z=this.depth/2;var v0=new Vertex(x,y,z);var v1=new Vertex(-x,y,z);var v2=new Vertex(-x,-y,z);var v3=new Vertex(x,-y,z);var v4=new Vertex(x,y,-z);var v5=new Vertex(-x,y,-z);var v6=new Vertex(-x,-y,-z);var v7=new Vertex(x,-y,-z);this.vertices=[v0,v1,v2,v3,v4,v5,v6,v7]};Box.prototype.setVertexColor=function(index,color){if(index<0||index>=this.vertices.length){return}var v=this.vertices[index];v.color=color};Box.prototype.setColor=function(color){for(var i=0;i<this.vertices.length;i++){this.setVertexColor(i,color)}};Box.prototype.setPosition=function(p){this.position=p;this.generateModelMatrix()};Box.prototype.generateModelMatrix=function(){var mat=Matrix4.createUnitMat4();mat=mat.rotateX(this.rotation.x);mat=mat.rotateY(this.rotation.y);mat=mat.rotateZ(this.rotation.z);mat=mat.translate(this.position);this.modelMatrix=mat;return this.modelMatrix};return Box}(Object3D);"use strict";var Scene=function(){function Scene(){this.children=[]}Scene.prototype.addChild=function(object){this.children.push(object)};Scene.prototype.removeChild=function(object){for(var i=0;i<this.children.length;i++){if(this.children[i].uuid==object.uuid){this.children.splice(i,1);break}}};return Scene}();"use strict";var Vertex=function(){function Vertex(x,y,z,color){if(x===void 0){x=0}if(y===void 0){y=0}if(z===void 0){z=0}this.position=new Vec3(x,y,z);if(color===undefined){this.color=new Color(16777215)}else{this.color=color}}Vertex.prototype.interp=function(v,t){var position=this.position.interp(v.position,t);var color=this.color.interp(v.color,t);return new Vertex(position.x,position.y,position.z,color)};Vertex.prototype.swap=function(v){this.position.swap(v.position);this.color.swap(v.color)};Vertex.prototype.clone=function(){var v=new Vertex(this.position.x,this.position.y,this.position.z,this.color.clone());return v};return Vertex}();function sortTriangleVertex(v1,v2,v3){if(v1.position.y>v2.position.y||v1.position.y==v2.position.y&&v1.position.x>v2.position.x){v1.swap(v2)}if(v2.position.y>v3.position.y||v2.position.y==v3.position.y&&v2.position.x>v3.position.x){v2.swap(v3)}if(v1.position.y>v2.position.y||v1.position.y==v2.position.y&&v1.position.x>v2.position.x){v1.swap(v2)}}"use strict";var WebRenderer=function(){function WebRenderer(_canvas,width,height){_canvas.width=width;_canvas.height=height;this.ctx=_canvas.getContext("2d");this.bufferData=this.ctx.createImageData(width,height);this.width=width;this.height=height;this.clearBuffer()}WebRenderer.prototype.clearBuffer=function(){var index=0;var data=this.bufferData.data;for(var h=0;h<this.height;h++){for(var w=0;w<this.width;w++){index=(h*this.width+w)*4;data[index]=0;data[index+1]=0;data[index+2]=0;data[index+3]=255}}};WebRenderer.prototype.render=function(){this.ctx.putImageData(this.bufferData,0,0)};WebRenderer.prototype.renderScene=function(scene,camera){this.clearBuffer();for(var _i=0,_a=scene.children;_i<_a.length;_i++){var obj=_a[_i];if(obj.type=="Box"){this.drawBox(obj,camera)}}this.render()};WebRenderer.prototype.drawPixel=function(x,y,color,alpha){if(alpha===void 0){alpha=1}if(x>this.width||y>this.height||x<0||y<0){return}x=Math.round(x);y=Math.round(y);var index=(y*this.width+x)*4;var data=this.bufferData.data;data[index]=color.r;data[index+1]=color.g;data[index+2]=color.b;data[index+3]=255*alpha};WebRenderer.prototype.drawLine=function(_v1,_v2){var v1=_v1.clone();var v2=_v2.clone();var x1=v1.position.x;var y1=v1.position.y;var x2=v2.position.x;var y2=v2.position.y;var dx=Math.abs(x2-x1);var dy=Math.abs(y2-y1);if(dx>=dy){if(x1>x2){var tmp=x1;x1=x2;x2=tmp;tmp=y1;y1=y2;y2=tmp;v1.color.swap(v2.color)}var flag=y2>=y1?1:-1;var k=flag*(dy<<1);var e=-dx*flag;for(var x=x1,y=y1;x<=x2;x++){var t=(x-x1)/(x2-x1);var color=v1.color.interp(v2.color,t);this.drawPixel(x,y,color);e+=k;if(flag*e>0){y+=flag;e-=2*dx*flag}}}else{if(y1>y2){var tmp=x1;x1=x2;x2=tmp;tmp=y1;y1=y2;y2=tmp;v1.color.swap(v2.color)}var flag=x2>x1?1:-1;var k=flag*(dx<<1);var e=-dy*flag;for(var x=x1,y=y1;y<=y2;y++){var t=(y-y1)/(y2-y1);var color=v1.color.interp(v2.color,t);this.drawPixel(x,y,color);e+=k;if(flag*e>0){x+=flag;e-=2*dy*flag}}}};WebRenderer.prototype.drawTriangle=function(_v1,_v2,_v3){var v1=_v1.clone();var v2=_v2.clone();var v3=_v3.clone();sortTriangleVertex(v1,v2,v3);if(Math.round(v1.position.y)==Math.round(v2.position.y)){this.drawBottomFlatTriangle(v1,v2,v3)}else if(Math.round(v2.position.y)==Math.round(v3.position.y)){this.drawTopFlatTriangle(v1,v2,v3)}else{var t=(v2.position.y-v1.position.y)/(v3.position.y-v1.position.y);var v4=v1.interp(v3,t);if(v4.position.x<v2.position.x){v2.swap(v4)}this.drawBottomFlatTriangle(v2,v4,v3);this.drawTopFlatTriangle(v1,v2,v4)}};WebRenderer.prototype.drawBoxWireframe=function(v_vec){this.drawSquareWireframe(v_vec[0],v_vec[1],v_vec[5],v_vec[4]);this.drawSquareWireframe(v_vec[3],v_vec[2],v_vec[6],v_vec[7]);this.drawSquareWireframe(v_vec[1],v_vec[2],v_vec[6],v_vec[5]);this.drawSquareWireframe(v_vec[0],v_vec[3],v_vec[7],v_vec[4]);this.drawSquareWireframe(v_vec[0],v_vec[1],v_vec[2],v_vec[3]);this.drawSquareWireframe(v_vec[4],v_vec[5],v_vec[6],v_vec[7])};WebRenderer.prototype.drawBox=function(box,camera){var v_vec=[];var proj=camera.projectionMatrix;var view=camera.viewMatrix;var model=box.generateModelMatrix();var triangleIndex=[1,0,4,4,5,1,7,3,2,2,6,7,6,2,1,1,5,6,7,4,0,0,3,7,2,3,0,0,1,2,6,5,4,4,7,6];for(var i=0;i<triangleIndex.length;i+=3){var v1_vec3=model.mulVec3(box.vertices[triangleIndex[i]].position).getVec3();var v2_vec3=model.mulVec3(box.vertices[triangleIndex[i+1]].position).getVec3();var v3_vec3=model.mulVec3(box.vertices[triangleIndex[i+2]].position).getVec3();var isBack=this.backTest(v1_vec3,v2_vec3,v3_vec3,camera.position);if(isBack){triangleIndex[i]=-1;triangleIndex[i+1]=-1;triangleIndex[i+2]=-1}}for(var _i=0,_a=box.vertices;_i<_a.length;_i++){var v=_a[_i];var mat=proj.mulMat4(view).mulMat4(model);var vec4=mat.mulVec3(v.position);var vec3=new Vec3(vec4.x/vec4.w,vec4.y/vec4.w,vec4.z/vec4.w);vec3.addScalar(1).mulScalar(width/2);vec3.y=height-vec3.y;var new_v=new Vertex(vec3.x,vec3.y,vec3.z,v.color.clone());v_vec.push(new_v)}if(box.wireframe){for(var i=0;i<triangleIndex.length;i+=3){if(triangleIndex[i]==-1){continue}this.drawTriangleWireframe(v_vec[triangleIndex[i]],v_vec[triangleIndex[i+1]],v_vec[triangleIndex[i+2]])}}else{for(var i=0;i<triangleIndex.length;i+=3){if(triangleIndex[i]==-1){continue}this.drawTriangle(v_vec[triangleIndex[i]],v_vec[triangleIndex[i+1]],v_vec[triangleIndex[i+2]])}}};WebRenderer.prototype.backTest=function(v1,v2,v3,pos){var v12=v2.substract(v1);var v13=v3.substract(v1);var n=v12.cross(v13);var v=v1.substract(pos);if(n.dotVec3(v)<=0){return false}else{return true}};WebRenderer.prototype.drawSquareWireframe=function(v1,v2,v3,v4){this.drawLine(v1,v2);this.drawLine(v2,v3);this.drawLine(v3,v4);this.drawLine(v4,v1)};WebRenderer.prototype.drawTriangleWireframe=function(v1,v2,v3){this.drawLine(v1,v2);this.drawLine(v2,v3);this.drawLine(v3,v1)};WebRenderer.prototype.drawBottomFlatTriangle=function(v1,v2,v3){var startY=v1.position.y;var endY=v3.position.y;for(var y=startY;y<=endY;y++){var t=(y-startY)/(endY-startY);var vl=v1.interp(v3,t);var vr=v2.interp(v3,t);this.drawScanLine(vl,vr)}};WebRenderer.prototype.drawTopFlatTriangle=function(v1,v2,v3){var startY=v1.position.y;var endY=v3.position.y;for(var y=startY;y<=endY;y++){var t=(y-startY)/(endY-startY);var vl=v1.interp(v2,t);var vr=v1.interp(v3,t);this.drawScanLine(vl,vr)}};WebRenderer.prototype.drawScanLine=function(v1,v2){var x=Math.round(v1.position.x);var y=Math.round(v1.position.y);var length=Math.round(v2.position.x)-x;for(var i=0;i<=length;i++){var t=i/length;var color=v1.color.interp(v2.color,t);this.drawPixel(x+i,y,color)}};return WebRenderer}();"use strict";var _Math=function(){function _Math(){}_Math.interp=function(x1,x2,t){return x1+(x2-x1)*t};_Math.radians=function(angle){return angle/180*Math.PI};_Math.generateUUID=function(){var lut=[];for(var i=0;i<256;i++){lut[i]=(i<16?"0":"")+i.toString(16)}var d0=Math.random()*4294967295|0;var d1=Math.random()*4294967295|0;var d2=Math.random()*4294967295|0;var d3=Math.random()*4294967295|0;var uuid=lut[d0&255]+lut[d0>>8&255]+lut[d0>>16&255]+lut[d0>>24&255]+"-"+lut[d1&255]+lut[d1>>8&255]+"-"+lut[d1>>16&15|64]+lut[d1>>24&255]+"-"+lut[d2&63|128]+lut[d2>>8&255]+"-"+lut[d2>>16&255]+lut[d2>>24&255]+lut[d3&255]+lut[d3>>8&255]+lut[d3>>16&255]+lut[d3>>24&255];return uuid.toUpperCase()};return _Math}();"use strict";var Matrix4=function(){function Matrix4(_n11,_n12,_n13,_n14,_n21,_n22,_n23,_n24,_n31,_n32,_n33,_n34,_n41,_n42,_n43,_n44){if(_n11===void 0){_n11=1}if(_n12===void 0){_n12=0}if(_n13===void 0){_n13=0}if(_n14===void 0){_n14=0}if(_n21===void 0){_n21=0}if(_n22===void 0){_n22=1}if(_n23===void 0){_n23=0}if(_n24===void 0){_n24=0}if(_n31===void 0){_n31=0}if(_n32===void 0){_n32=0}if(_n33===void 0){_n33=1}if(_n34===void 0){_n34=0}if(_n41===void 0){_n41=0}if(_n42===void 0){_n42=0}if(_n43===void 0){_n43=0}if(_n44===void 0){_n44=1}this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];this.elements[0]=_n11,this.elements[1]=_n12,this.elements[2]=_n13,this.elements[3]=_n14;this.elements[4]=_n21,this.elements[5]=_n22,this.elements[6]=_n23,this.elements[7]=_n24;this.elements[8]=_n31,this.elements[9]=_n32,this.elements[10]=_n33,this.elements[11]=_n34;this.elements[12]=_n41,this.elements[13]=_n42,this.elements[14]=_n43,this.elements[15]=_n44}Matrix4.prototype.set=function(_n11,_n12,_n13,_n14,_n21,_n22,_n23,_n24,_n31,_n32,_n33,_n34,_n41,_n42,_n43,_n44){if(_n11===void 0){_n11=1}if(_n12===void 0){_n12=0}if(_n13===void 0){_n13=0}if(_n14===void 0){_n14=0}if(_n21===void 0){_n21=0}if(_n22===void 0){_n22=1}if(_n23===void 0){_n23=0}if(_n24===void 0){_n24=0}if(_n31===void 0){_n31=0}if(_n32===void 0){_n32=0}if(_n33===void 0){_n33=1}if(_n34===void 0){_n34=0}if(_n41===void 0){_n41=0}if(_n42===void 0){_n42=0}if(_n43===void 0){_n43=0}if(_n44===void 0){_n44=1}this.elements[0]=_n11,this.elements[1]=_n12,this.elements[2]=_n13,this.elements[3]=_n14;this.elements[4]=_n21,this.elements[5]=_n22,this.elements[6]=_n23,this.elements[7]=_n24;this.elements[8]=_n31,this.elements[9]=_n32,this.elements[10]=_n33,this.elements[11]=_n34;this.elements[12]=_n41,this.elements[13]=_n42,this.elements[14]=_n43,this.elements[15]=_n44};Matrix4.createPerspective=function(fov,aspect,nearZ,farZ){var cotHalfFoV=1/Math.tan(fov/2);return new Matrix4(cotHalfFoV/aspect,0,0,0,0,cotHalfFoV,0,0,0,0,-(farZ+nearZ)/(farZ-nearZ),-2*farZ*nearZ/(farZ-nearZ),0,0,-1,0)};Matrix4.createLookAt=function(pos,target,upVec){var z=pos.substract(target);if(z.lengthSq()===0){z.z=1}z.normalize();var x=upVec.cross(z);if(x.lengthSq()===0){if(Math.abs(upVec.z)===1){z.x+=1e-4}else{z.z+=1e-4}z.normalize();x=upVec.cross(z)}x.normalize();var y=z.cross(x);var lookAt=new Matrix4(x.x,x.y,x.z,0,y.x,y.y,y.z,0,z.x,z.y,z.z,0,0,0,0,1);return lookAt.mulMat4(Matrix4.createTranslate(new Vec3(-pos.x,-pos.y,-pos.z)))};Matrix4.createUnitMat4=function(){return new Matrix4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)};Matrix4.createTranslate=function(dir,mat4){if(mat4==undefined){mat4=Matrix4.createUnitMat4()}var tmat4=new Matrix4(1,0,0,dir.x,0,1,0,dir.y,0,0,1,dir.z,0,0,0,1);return tmat4.mulMat4(mat4)};Matrix4.createRotateX=function(angle,mat4){if(mat4==undefined){mat4=Matrix4.createUnitMat4()}var c=Math.cos(angle);var s=Math.sin(angle);var rmat=new Matrix4(1,0,0,0,0,c,-s,0,0,s,c,0,0,0,0,1);return rmat.mulMat4(mat4)};Matrix4.createRotateY=function(angle,mat4){if(mat4==undefined){mat4=Matrix4.createUnitMat4()}var c=Math.cos(angle);var s=Math.sin(angle);var rmat=new Matrix4(c,0,s,0,0,1,0,0,-s,0,c,0,0,0,0,1);return rmat.mulMat4(mat4)};Matrix4.createRotateZ=function(angle,mat4){if(mat4==undefined){mat4=Matrix4.createUnitMat4()}var c=Math.cos(angle);var s=Math.sin(angle);var rmat=new Matrix4(c,-s,0,0,s,c,0,0,0,0,1,0,0,0,0,1);return rmat.mulMat4(mat4)};Matrix4.prototype.translate=function(dir){return Matrix4.createTranslate(dir,this)};Matrix4.prototype.rotateX=function(angle){return Matrix4.createRotateX(angle,this)};Matrix4.prototype.rotateY=function(angle){return Matrix4.createRotateY(angle,this)};Matrix4.prototype.rotateZ=function(angle){return Matrix4.createRotateZ(angle,this)};Matrix4.prototype.copy=function(){return new Matrix4(this.elements[0],this.elements[1],this.elements[2],this.elements[3],this.elements[4],this.elements[5],this.elements[6],this.elements[7],this.elements[8],this.elements[9],this.elements[10],this.elements[11],this.elements[12],this.elements[13],this.elements[14],this.elements[15])};Matrix4.prototype.elementAt=function(i,j){return this.elements[i*4+j]};Matrix4.prototype.print=function(){console.warn("WebRender.Matrix4: print this matrix. this function is only for debugging.");console.log(this.elements[0],this.elements[1],this.elements[2],this.elements[3]);console.log(this.elements[4],this.elements[5],this.elements[6],this.elements[7]);console.log(this.elements[8],this.elements[9],this.elements[10],this.elements[11]);console.log(this.elements[12],this.elements[13],this.elements[14],this.elements[15])};Matrix4.prototype.mulVec4=function(v){var result=new Vec4;result.x=this.elements[0]*v.x+this.elements[1]*v.y+this.elements[2]*v.z+this.elements[3]*v.w;result.y=this.elements[4]*v.x+this.elements[5]*v.y+this.elements[6]*v.z+this.elements[7]*v.w;result.z=this.elements[8]*v.x+this.elements[9]*v.y+this.elements[10]*v.z+this.elements[11]*v.w;result.w=this.elements[12]*v.x+this.elements[13]*v.y+this.elements[14]*v.z+this.elements[15]*v.w;return result};Matrix4.prototype.mulVec3=function(v){var tmp=new Vec4(v.x,v.y,v.z,1);return this.mulVec4(tmp)};Matrix4.prototype.mulMat4=function(mat4){var result=new Matrix4;for(var i=0;i<4;i++){for(var j=0;j<4;j++){var tmp=0;for(var t=0;t<4;t++){tmp+=this.elementAt(i,t)*mat4.elementAt(t,j)}result.elements[i*4+j]=tmp}}return result};Matrix4.prototype.transpose=function(){this.swapPosition(1,4);this.swapPosition(2,8);this.swapPosition(3,12);this.swapPosition(6,9);this.swapPosition(7,13);this.swapPosition(11,14);return this};Matrix4.prototype.swapPosition=function(i,j){var tmp=this.elements[i];this.elements[i]=this.elements[j];this.elements[j]=tmp};return Matrix4}();"use strict";var Vec3=function(){function Vec3(_x,_y,_z){if(_x===void 0){_x=0}if(_y===void 0){_y=0}if(_z===void 0){_z=0}this.x=_x;this.y=_y;this.z=_z}Vec3.prototype.set=function(_x,_y,_z){this.x=_x;this.y=_y;this.z=_z;return this};Vec3.prototype.clone=function(){return new Vec3(this.x,this.y,this.z)};Vec3.prototype.swap=function(v){var tmp=v.clone();v.x=this.x;v.y=this.y;v.z=this.z;this.x=tmp.x;this.y=tmp.y;this.z=tmp.z};Vec3.prototype.interp=function(v,t){var x=_Math.interp(this.x,v.x,t);var y=_Math.interp(this.y,v.y,t);var z=_Math.interp(this.z,v.z,t);return new Vec3(x,y,z)};Vec3.prototype.add=function(v){this.x+=v.x;this.y+=v.y;this.z+=v.z;return this};Vec3.prototype.addScalar=function(s){this.x+=s;this.y+=s;this.z+=s;return this};Vec3.prototype.mulScalar=function(s){this.x*=s;this.y*=s;this.z*=s;return this};Vec3.prototype.dotVec3=function(v){return this.x*v.x+this.y*v.y+this.z*v.z};Vec3.prototype.normalize=function(){var tmp=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);if(tmp===0){console.warn("WebRender.Vec3: zero vector; normilize failed.");return this}this.x/=tmp;this.y/=tmp;this.z/=tmp;return this};Vec3.prototype.substract=function(vec){var res=new Vec3;res.x=this.x-vec.x;res.y=this.y-vec.y;res.z=this.z-vec.z;return res};Vec3.prototype.cross=function(vec){var ax=this.x,ay=this.y,az=this.z;var bx=vec.x,by=vec.y,bz=vec.z;var res=new Vec3;res.x=ay*bz-az*by;res.y=az*bx-ax*bz;res.z=ax*by-ay*bx;return res};Vec3.prototype.lengthSq=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};return Vec3}();"use strict";var Vec4=function(){function Vec4(_x,_y,_z,_w){if(_x===void 0){_x=0}if(_y===void 0){_y=0}if(_z===void 0){_z=0}if(_w===void 0){_w=0}this.x=_x;this.y=_y;this.z=_z;this.w=_w}Vec4.prototype.set=function(_x,_y,_z,_w){if(_w===void 0){_w=1}this.x=_x;this.y=_y;this.z=_z;this.w=_w;return this};Vec4.prototype.setVec3=function(v,_w){if(_w===void 0){_w=1}this.x=v.x;this.y=v.y;this.z=v.z;this.w=_w;return this};Vec4.prototype.getVec3=function(){return new Vec3(this.x,this.y,this.z)};Vec4.prototype.clone=function(){return new Vec4(this.x,this.y,this.z,this.w)};Vec4.prototype.add=function(v){this.x+=v.x;this.y+=v.y;this.z+=v.z;this.w+=v.w;return this};Vec4.prototype.addScalar=function(s){this.x+=s;this.y+=s;this.z+=s;this.w+=s;return this};Vec4.prototype.mulScalar=function(s){this.x*=s;this.y*=s;this.z*=s;this.w*=s;return this};return Vec4}();